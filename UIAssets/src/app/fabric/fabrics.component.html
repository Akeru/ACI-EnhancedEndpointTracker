<div class="row">
    <div class="col-md-12">
        &nbsp;
    </div>
</div>
<div class="row">
    <div class="col-md-2">
        <nav class="sidebar" style="position: relative; width: 100%; height: 85vh;">
            <div class="sidebar__header">
                <div class="sidebar__header-title">{{ fabricName }}</div>
            </div>
            <ul>
                <li class="sidebar__item"><a [routerLink]="['.']">Overview</a></li>
                <li class="sidebar__item"><a [routerLink]="['events']">Events</a></li>
                <li class="sidebar__item"><a [routerLink]="['moves']">Moves</a></li>
                <li class="sidebar__drawer" [class.sidebar__drawer--opened]="endpointExpanded"
                    (click)="endpointExpanded = !endpointExpanded">
                    <a>Endpoints</a>
                    <ul (click)="$event.stopPropagation()">
                        <li class="sidebar__item"><a [routerLink]="['endpoints']">All</a></li>
                        <li class="sidebar__item"><a [routerLink]="['offsubnet-endpoints']">OffSubnet</a></li>
                        <li class="sidebar__item"><a [routerLink]="['stale-endpoints']">Stale</a></li>
                        <li class="sidebar__item"><a [routerLink]="['rapid-endpoints']">Rapid</a></li>
                        <li class="sidebar__item"><a [routerLink]="['cleared-endpoints']">Cleared</a></li>
                    </ul>
                </li>
                <li class="sidebar__drawer" [class.sidebar__drawer--opened]="configurationExpanded"
                    (click)="configurationExpanded = !configurationExpanded">
                    <a>Configuration</a>
                    <ul (click)="$event.stopPropagation()">
                        <li class="sidebar__item"><a [routerLink]="['settings','connectivity']">Connectivity</a></li>
                        <li class="sidebar__item"><a [routerLink]="['settings','notification']">Notification</a></li>
                        <li class="sidebar__item"><a [routerLink]="['settings','remediation']">Remediation</a></li>
                        <li class="sidebar__item"><a [routerLink]="['settings','advanced']">Advanced</a></li>
                    </ul>
                </li>
            </ul>
        </nav>
    </div>
    <div class="col-md-10">
        <div class="row">
            <div class="col-md-12">
                <div class="panel panel--bordered panel--loose">
                    <button type="button" class="link">
                        <span class="icon-small icon-edit" (click)='modalService.openModal(filtertemplate)'></span>
                    </button>
                    {{ queryText }}
                </div>
            </div>
        </div>
        <div class="row">
            <div class="col-md-12">
                &nbsp;
            </div>
        </div>
        <div class="row">
            <div class="col-md-12">
                <router-outlet></router-outlet>
            </div>
        </div>
    </div>
</div>
<ng-template #filtertemplate>
    <div class="modal--large">
        <div class="modal__body text-left">
            <query-builder [formControl]='queryCtrl' [config]='currentConfig' (ngModelChange)="onChange($event)">
            </query-builder>
        </div>
        &nbsp;
        <div class="modal-footer">
            <button class="btn btn--small btn--negative" (click)="modalService.hideModal()">Apply</button>
            <button class="btn btn--small" (click)="modalService.hideModal()">Cancel</button>
        </div>
    </div>
</ng-template>