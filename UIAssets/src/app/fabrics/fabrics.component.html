<div class="content" style="margin-top:1%">
    <div class="container">     
          <div class="row">
                <div class="col-md-12">
                  <h3>Fabrics
                      <a class="btn btn--icon btn--small btn--primary">
                          <span>{{rows.length}}</span>
                        </a>
                        <a  class="btn btn--icon btn--small btn--success pull-right">
                            <span class="icon-refresh"></span>
                          </a>
                          <a href="" class="btn btn--icon btn--small btn--primary pull-right">
                            <span class="icon-add"></span>
                          </a>
                  </h3>
                </div>
            </div>            
    <div class="row" style="margin-top:1%">
        <div class="col-md-12 panel panel--raised">
            <ngx-datatable
            #myTable
            class="fullscreen"
            [columnMode]="'flex'"
            [headerHeight]="25"
            [footerHeight]="50"
            [rowHeight]="'auto'"
            [sorts]="[sorts]"
            [limit]="10"
            [loadingIndicator]="loading"
            [rows]="rows"
            [cssClasses]="{
              sortAscending: 'icon-chevron-down',
              sortDescending: 'icon-chevron-up',
              pagerLeftArrow: 'icon-step-prev',
              pagerRightArrow: 'icon-step-next',
              pagerPrevious: 'icon-step-backward',
              pagerNext: 'icon-step-forward'
            }"
            (sort)="onSort($event)">
            <ngx-datatable-row-detail [rowHeight]="'auto'" (toggle)="onToggle($event)" >
                <ng-template let-row="row" let-expanded="expanded" ngx-datatable-row-detail-template>
                  <div class="row">
                    <div class="col-md-12">
                      <ngx-datatable
                      [columnMode]="'flex'"
                      [headerHeight]="25"
                      [footerHeight]="50"
                      [rowHeight]="'auto'"
                      [sorts]="[sorts]"
                      [limit]="10"
                      [loadingIndicator]="loading"
                      [rows]="row.events"
                      [cssClasses]="{
                      sortAscending: 'icon-chevron-down',
                      sortDescending: 'icon-chevron-up',
                      pagerLeftArrow: 'icon-step-prev',
                      pagerRightArrow: 'icon-step-next',
                      pagerPrevious: 'icon-step-backward',
                      pagerNext: 'icon-step-forward'
                      }">
                        <ngx-datatable-column prop="time" name="Timestamp" [flexGrow]="0.2" >
                          <ng-template let-row="row" let-value="value" ngx-datatable-cell-template>
                            {{value}}
                          </ng-template>
                        </ngx-datatable-column>
                        <ngx-datatable-column prop="status" name="Status" [flexGrow]="0.2">
                        <ng-template let-row="row" let-value="value" ngx-datatable-cell-template>
                          <span class="label label--raised" [ngClass] = "{'label--success':value==='Initializing','label--negative':value==='Restarting'}">
                            {{value}}
                          </span>
                        </ng-template>
                        </ngx-datatable-column>
                        <ngx-datatable-column prop="description" name="Description" [flexGrow]="0.2" >
                          <ng-template let-row="row" let-value="value" ngx-datatable-cell-template>
                            {{value}}
                          </ng-template>
                        </ngx-datatable-column>
                      </ngx-datatable>
                    </div>
                  </div>
                </ng-template>
              </ngx-datatable-row-detail>
          <ngx-datatable-column prop="fabric" name="Fabric" [sortable]="true" [flexGrow]="0.2">
            <ng-template let-row="row" let-value="value" ngx-datatable-cell-template>
              {{value}}
            </ng-template>
          </ngx-datatable-column>
          <ngx-datatable-column prop="status" name="Status" [sortable]="true" [flexGrow]="0.2">
              <ng-template let-row="row" let-value="value" ngx-datatable-cell-template>
                  <span [ngClass]="{'label label--success label--raised':value === 'Running', 'label label--dkgray label--raised':value === 'Stopped'}">
                    <span>
                      {{value}}
                    </span>
                  </span>
              </ng-template>
            </ngx-datatable-column>
            <ngx-datatable-column prop="ips" name="Active IPs" [sortable]="true" [flexGrow]="0.2">
                <ng-template let-row="row" let-value="value" ngx-datatable-cell-template>
                  {{value}}
                </ng-template>
              </ngx-datatable-column>
              <ngx-datatable-column prop="macs" name="Active MACs" [sortable]="true" [flexGrow]="0.2">
                  <ng-template let-row="row" let-value="value" ngx-datatable-cell-template>
                      {{value}}
                  </ng-template>
              </ngx-datatable-column>
              <ngx-datatable-column name="Actions" [flexGrow]="0.2">
                <ng-template let-row="row" let-expanded="expanded" ngx-datatable-cell-template>
                  <a class="btn btn--small btn--icon btn--primary">
                    <span class="icon-animation"></span>
                  </a>
                  <a class="btn btn--small btn--icon btn--negative">
                    <span class="icon-close"></span>
                  </a>
                  <a class="btn btn--small btn--icon">
                    <span class="icon-edit"></span>
                  </a>
                  <a class="btn btn--small btn--icon btn--secondary" (click)="toggleRow(row)">
                    <span [ngClass]="{'icon-chevron-up':expanded===true , 'icon-chevron-down':expanded===false}"></span>
                  </a>
                </ng-template>
              </ngx-datatable-column>
              
          </ngx-datatable>
        </div>
      </div>
    
    <div class="row" style="margin-top:1%">
        <div class="col-md-12">
          <div class="form-group">
              <div class="form-group__text">
                  <input type="text" id="searchendpoint" />
                  <label for="searchendpoint">Search Events</label>
                </div>
          </div>
        </div>
    </div>
    <div class="row" style="margin-top:1%;background-color:white;">
      <div class="col-md-12">
        <div class="secondary-tabs">
          <ul class="tabs">
            <li *ngFor="let tab of tabs ; let i=index" id="i" class="tab" [ngClass]="{'active':tab.active===true}" (click)="changeTab(i)">
              <a tabindex="i">
                <div class="tab__heading" title="tab.name">{{tab.name}}
                    <a class="btn btn--icon btn--small" [ngClass]="{'btn--primary':tab.active===true}">
                        <span>{{events[i].length}}</span>
                      </a>
                </div>
              </a>
            </li>
          </ul>
        </div>
      </div>
    </div>
    
    <div class="row">
      <div class="col-md-12 panel panel--raised">
        <ngx-datatable
        [columnMode]="'flex'"
                    [headerHeight]="25"
                    [footerHeight]="50"
                    [rowHeight]="'auto'"
                    [sorts]="[sorts]"
                    [limit]="10"
                    [loadingIndicator]="loading"
                    [rows]="eventRows"
                    [cssClasses]="{
                    sortAscending: 'icon-chevron-down',
                    sortDescending: 'icon-chevron-up',
                    pagerLeftArrow: 'icon-step-prev',
                    pagerRightArrow: 'icon-step-next',
                    pagerPrevious: 'icon-step-backward',
                    pagerNext: 'icon-step-forward'
                    }">
                    <ngx-datatable-column prop="time" name="Timestamp" [sortable]="true" [flexGrow]="0.2">
                        <ng-template let-row="row" let-value="value" ngx-datatable-cell-template>
                            {{value}}
                        </ng-template>
                    </ngx-datatable-column> 
                    <ngx-datatable-column prop="fabric" name="Fabric" [sortable]="true" [flexGrow]="0.2">
                        <ng-template let-row="row" let-value="value" ngx-datatable-cell-template>
                            {{value}}
                        </ng-template>
                    </ngx-datatable-column>   
                    <ngx-datatable-column prop="type" name="Type" [sortable]="true" [flexGrow]="0.2">
                        <ng-template let-row="row" let-value="value" ngx-datatable-cell-template>
                            <span class="label label--raised" [ngClass]="{'label--success':value==='IP','label--warning':value==='MAC'}">
                                {{value}}
                            </span>
                        </ng-template>
                    </ngx-datatable-column>
                    <ngx-datatable-column prop="address" name="Address" [sortable]="true" [flexGrow]="0.2">
                      <ng-template let-row="row" let-value="value" ngx-datatable-cell-template>
                          <a [routerLink]="['/ephistory',value]">{{value}}</a>
                      </ng-template>
                  </ngx-datatable-column>  
                    <ngx-datatable-column prop="vrfbd" name="VRF/BD" [sortable]="true" [flexGrow]="0.2">
                        <ng-template let-row="row" let-value="value" ngx-datatable-cell-template>
                            {{value}}
                        </ng-template>
                    </ngx-datatable-column>    
        </ngx-datatable>
      </div>
    </div>
  </div>
    </div>
   